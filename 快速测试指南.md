# ViT + RSST å¿«é€Ÿæµ‹è¯•æŒ‡å—

## ğŸ¯ ç›®æ ‡

åœ¨CIFAR-10ä¸Šå¿«é€ŸéªŒè¯ViT + RSSTæµç¨‹æ˜¯å¦é€šç•…ï¼Œ**ä¸è¿½æ±‚æœ€ç»ˆç²¾åº¦**ã€‚

---

## ğŸš€ æ–¹æ³•1ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆæ¨èï¼‰

### æ­¥éª¤1ï¼šè¿è¡Œæµ‹è¯•è„šæœ¬

```bash
python test_vit_rsst_flow.py
```

### æµ‹è¯•å†…å®¹

âœ… **6é¡¹ç»„ä»¶æµ‹è¯•**ï¼ˆ1åˆ†é’Ÿï¼‰ï¼š
1. ä¾èµ–åº“æ£€æŸ¥ï¼ˆtorch, timm, etc.ï¼‰
2. é¢„è®­ç»ƒViTæ¨¡å‹åŠ è½½
3. CIFAR-10æ•°æ®åŠ è½½
4. å‰å‘ä¼ æ’­æµ‹è¯•
5. å‰ªæåŠŸèƒ½æµ‹è¯•
6. å‰ªæåæ¨ç†æµ‹è¯•

âœ… **å¯é€‰ï¼šå®Œæ•´è®­ç»ƒæµ‹è¯•**ï¼ˆ5-10åˆ†é’Ÿï¼‰ï¼š
- 2è½®å‰ªæ Ã— 2ä¸ªepoch
- éªŒè¯è®­ç»ƒå¾ªç¯æ— æŠ¥é”™

### é¢„æœŸè¾“å‡º

```
ğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ª
ViT + RSST æµç¨‹å¿«é€Ÿæµ‹è¯•
ğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ª

ã€æµ‹è¯•1/6ã€‘æ£€æŸ¥ä¾èµ–åº“
------------------------------------------------------------
âœ“ PyTorch: 2.x.x
âœ“ Torchvision: 0.x.x
âœ“ timm: 0.x.x
âœ“ CUDAå¯ç”¨: True

ã€æµ‹è¯•2/6ã€‘åŠ è½½é¢„è®­ç»ƒViTæ¨¡å‹
------------------------------------------------------------
âœ“ æ¨¡å‹åˆ›å»ºæˆåŠŸ
âœ“ æˆåŠŸåŠ è½½é¢„è®­ç»ƒæƒé‡

...

âœ“âœ“âœ“ æ‰€æœ‰ç»„ä»¶æµ‹è¯•é€šè¿‡ï¼ âœ“âœ“âœ“
```

---

## ğŸš€ æ–¹æ³•2ï¼šå¿«é€Ÿè„šæœ¬æµ‹è¯•

### è¿è¡Œ

```bash
chmod +x quick_test_vit_cifar10.sh
./quick_test_vit_cifar10.sh
```

### é…ç½®

- **æ•°æ®é›†**: CIFAR-10ï¼ˆè‡ªåŠ¨ä¸‹è½½ï¼‰
- **æ¨¡å‹**: ViT-Tiny + ImageNeté¢„è®­ç»ƒ
- **å‰ªæ**: 2è½® Ã— 2 epochs
- **æ—¶é—´**: 5-10åˆ†é’Ÿ
- **ç›®çš„**: éªŒè¯è®­ç»ƒå¾ªç¯èƒ½è·‘é€š

### é¢„æœŸè¾“å‡º

```
========================================
ViT + RSST on CIFAR-10 å¿«é€Ÿæµç¨‹æµ‹è¯•
========================================

Epoch: [0][0/703]    Loss: 2.3456    Accuracy: 12.500
Epoch: [0][100/703]  Loss: 2.1234    Accuracy: 23.438
...

âœ… æµç¨‹æµ‹è¯•é€šè¿‡ï¼

ç°åœ¨å¯ä»¥è¿è¡Œæ­£å¼å®éªŒäº†:
python main_imp_fillback.py \
    --dataset cifar10 \
    --arch vit_tiny \
    --pretrained \
    --struct rsst \
    --epochs 80 \
    --pruning_times 15
```

---

## ğŸš€ æ–¹æ³•3ï¼šæ‰‹åŠ¨å‘½ä»¤æµ‹è¯•

```bash
python main_imp_fillback.py \
    --dataset cifar10 \
    --arch vit_tiny \
    --pretrained \
    --struct rsst \
    --epochs 2 \
    --batch_size 64 \
    --pruning_times 2 \
    --rate 0.2 \
    --save_dir test_output/quick_test
```

---

## âœ… æµ‹è¯•é€šè¿‡å

### è¿è¡Œæ­£å¼å®éªŒ

```bash
# CIFAR-10 æ­£å¼è®­ç»ƒ
python main_imp_fillback.py \
    --dataset cifar10 \
    --arch vit_tiny \
    --pretrained \
    --struct rsst \
    --criteria l1 \
    --epochs 80 \
    --batch_size 128 \
    --lr 0.001 \
    --warmup 20 \
    --decreasing_lr 60,90 \
    --pruning_times 15 \
    --rate 0.15 \
    --RST_schedule exp_custom_exponents \
    --reg_granularity_prune 0.5 \
    --exponents 3 \
    --seed 42 \
    --save_dir results/vit_tiny_cifar10_rsst

# é¢„è®¡æ—¶é—´: 8-12å°æ—¶
# é¢„æœŸç²¾åº¦: ~85% (å‰ªæåˆ°20%æƒé‡)
```

```bash
# CIFAR-100 æ­£å¼è®­ç»ƒ
python main_imp_fillback.py \
    --dataset cifar100 \
    --arch vit_small \
    --pretrained \
    --struct rsst \
    --epochs 120 \
    --batch_size 128 \
    --lr 0.0005 \
    --pruning_times 15 \
    --save_dir results/vit_small_cifar100_rsst

# é¢„è®¡æ—¶é—´: 12-18å°æ—¶
# é¢„æœŸç²¾åº¦: ~75% (å‰ªæåˆ°20%æƒé‡)
```

---

## ğŸ› å¯èƒ½çš„é—®é¢˜

### é—®é¢˜1: timmæœªå®‰è£…

```bash
ImportError: No module named 'timm'
```

**è§£å†³:**
```bash
pip install timm
```

### é—®é¢˜2: CIFARæ•°æ®ä¸‹è½½å¤±è´¥

```bash
RuntimeError: Dataset not found
```

**è§£å†³:**
```bash
# æ‰‹åŠ¨ä¸‹è½½æˆ–ä½¿ç”¨å›½å†…é•œåƒ
# æˆ–ç­‰å¾…è‡ªåŠ¨é‡è¯•
```

### é—®é¢˜3: CUDAå†…å­˜ä¸è¶³

```bash
RuntimeError: CUDA out of memory
```

**è§£å†³:**
```bash
# å‡å°batch size
--batch_size 32  # ä»64é™åˆ°32
```

### é—®é¢˜4: æ¨¡å‹æœªè¯†åˆ«ä¸ºViT

```bash
AssertionError: æ¨¡å‹æœªè¢«è¯†åˆ«ä¸ºViT!
```

**è§£å†³:**
æ£€æŸ¥æ˜¯å¦æ­£ç¡®å¯¼å…¥äº†vitæ¨¡å‹:
```python
from models.vit import vit_tiny  # ç¡®ä¿å¯¼å…¥æ­£ç¡®
```

---

## ğŸ“Š å¿«é€Ÿæµ‹è¯• vs æ­£å¼å®éªŒ

| é¡¹ç›® | å¿«é€Ÿæµ‹è¯• | æ­£å¼å®éªŒ |
|------|---------|---------|
| **ç›®çš„** | éªŒè¯æµç¨‹ | è¿½æ±‚ç²¾åº¦ |
| **å‰ªææ¬¡æ•°** | 2è½® | 15è½® |
| **æ¯è½®epoch** | 2 | 80-120 |
| **Batch size** | 64 | 128 |
| **æ—¶é—´** | 5-10åˆ†é’Ÿ | 8-18å°æ—¶ |
| **ç²¾åº¦** | ~40% | ~75-85% |

---

## ğŸ’¡ æµ‹è¯•å»ºè®®

1. **é¦–æ¬¡ä½¿ç”¨**: å…ˆè¿è¡Œ `test_vit_rsst_flow.py` éªŒè¯æ‰€æœ‰ç»„ä»¶
2. **å¿«é€ŸéªŒè¯**: ä½¿ç”¨ `quick_test_vit_cifar10.sh` éªŒè¯è®­ç»ƒå¾ªç¯
3. **æ­£å¼å®éªŒ**: ä½¿ç”¨å®Œæ•´å‚æ•°é…ç½®è¿è¡Œ

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®Œæ•´ä½¿ç”¨æŒ‡å—**: `ViT_RSSTä½¿ç”¨æŒ‡å—.md`
- **é¢„è®­ç»ƒæ¨¡å‹**: `ViTé¢„è®­ç»ƒæ¨¡å‹ä½¿ç”¨è¯´æ˜.md`
- **ImageNetæ”¯æŒ**: `ImageNet_ViT_RSSTä½¿ç”¨æŒ‡å—.md`

---

**ç°åœ¨å¼€å§‹æµ‹è¯•ï¼**

```bash
# æœ€å¿«çš„æ–¹å¼
python test_vit_rsst_flow.py
```

ğŸ‰ ç¥æµ‹è¯•é¡ºåˆ©ï¼

