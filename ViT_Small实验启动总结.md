# ViT-Small Head+MLPç»„åˆå‰ªæå®éªŒ - å¯åŠ¨æ€»ç»“

**å¯åŠ¨æ—¶é—´**: 2026-01-14 22:19  
**çŠ¶æ€**: âœ… æ‰€æœ‰å®éªŒæ­£å¸¸è¿è¡Œä¸­

---

## ğŸ“Š å®éªŒé…ç½®

### åŸºç¡€é…ç½®
- **æ¨¡å‹**: vit_small
  - å‚æ•°é‡: ~21M
  - Blocks: 12
  - Embed dim: 384
  - Num heads: 6
  - MLP hidden: 1536

### å‰ªæé…ç½®
- **ç±»å‹**: Head + MLP Neurons å‡†ç»“æ„åŒ–å‰ªæ
- **Criteria**: magnitude (æƒé‡å¹…åº¦)
- **Headå‰ªæç‡**: 30%
- **MLPå‰ªæç‡**: 30%
- **è¿­ä»£æ¬¡æ•°**: 20
- **Epochs/è¿­ä»£**: 80
- **æ€»Epochs**: 1,600 per experiment

### æ•°æ®é›†ä¸æ–¹æ³•
| # | æ•°æ®é›† | æ–¹æ³• | PID | çŠ¶æ€ |
|---|--------|------|-----|------|
| 1 | CIFAR-10 | Refill | 310604 | âœ… è¿è¡Œä¸­ |
| 2 | CIFAR-10 | RSST | 310633 | âœ… è¿è¡Œä¸­ |
| 3 | CIFAR-100 | Refill | 310813 | âœ… è¿è¡Œä¸­ |
| 4 | CIFAR-100 | RSST | 310999 | âœ… è¿è¡Œä¸­ |

---

## ğŸ“ æ–‡ä»¶ç»“æ„

### æ—¥å¿—æ–‡ä»¶
```
logs_vit_small/
â”œâ”€â”€ cifar10_refill_0114_2219.log
â”œâ”€â”€ cifar10_rsst_0114_2219.log
â”œâ”€â”€ cifar100_refill_0114_2219.log
â”œâ”€â”€ cifar100_rsst_0114_2219.log
â””â”€â”€ experiment_pids_0114_2219.txt
```

### è¾“å‡ºç›®å½•
```
output/
â”œâ”€â”€ vit_small_cifar10_refill/
â”œâ”€â”€ vit_small_cifar10_rsst/
â”œâ”€â”€ vit_small_cifar100_refill/
â””â”€â”€ vit_small_cifar100_rsst/
```

### åˆå§‹åŒ–æ–‡ä»¶
```
init_model/
â”œâ”€â”€ vit_small_cifar10_init.pth.tar
â””â”€â”€ vit_small_cifar100_init.pth.tar
```

---

## ğŸ’» èµ„æºä½¿ç”¨

### GPU
- **å‹å·**: NVIDIA A800 80GB PCIe
- **æ˜¾å­˜ä½¿ç”¨**: 22GB / 82GB (27%)
- **GPUåˆ©ç”¨ç‡**: ~10%
- **æ¸©åº¦**: 73Â°C

### CPU & å†…å­˜
- **CPUä½¿ç”¨**: ~10000% (4ä¸ªå®éªŒ Ã— ~2500%)
- **å†…å­˜ä½¿ç”¨**: ~16GB (4 Ã— 4GB)

---

## â±ï¸ æ—¶é—´ä¼°ç®—

### å•ä¸ªå®éªŒ
- **æ¯ä¸ªepoch**: ~6åˆ†é’Ÿ
- **æ¯æ¬¡è¿­ä»£**: 80 epochs Ã— 6åˆ†é’Ÿ = 8å°æ—¶
- **å®Œæ•´å®éªŒ**: 20æ¬¡è¿­ä»£ Ã— 8å°æ—¶ = 160å°æ—¶ â‰ˆ **7å¤©**

### 4ä¸ªå®éªŒå¹¶è¡Œ
- **é¢„è®¡å®Œæˆ**: 7-10å¤©

---

## ğŸ› ï¸ ç®¡ç†å·¥å…·

### å¿«é€ŸæŸ¥çœ‹çŠ¶æ€
```bash
./check_vit_small_status.sh
```

### å®Œæ•´ç®¡ç†ç•Œé¢
```bash
./manage_vit_small_experiments.sh
```
åŠŸèƒ½ï¼š
1. æŸ¥çœ‹å®éªŒçŠ¶æ€
2. æŸ¥çœ‹æ—¥å¿—åˆ—è¡¨
3. å®æ—¶æŸ¥çœ‹æ—¥å¿—
4. åœæ­¢æ‰€æœ‰å®éªŒ
5. æŸ¥çœ‹å®éªŒç»“æœ
6. æŸ¥çœ‹GPUä½¿ç”¨æƒ…å†µ

### æŸ¥çœ‹å®æ—¶æ—¥å¿—
```bash
# CIFAR-10 + Refill
tail -f logs_vit_small/cifar10_refill_0114_2219.log

# CIFAR-10 + RSST
tail -f logs_vit_small/cifar10_rsst_0114_2219.log

# CIFAR-100 + Refill
tail -f logs_vit_small/cifar100_refill_0114_2219.log

# CIFAR-100 + RSST
tail -f logs_vit_small/cifar100_rsst_0114_2219.log
```

### æŸ¥çœ‹è¿›ç¨‹
```bash
ps aux | grep "vit_small.*main_imp_fillback" | grep -v grep
```

### æŸ¥çœ‹GPU
```bash
nvidia-smi
```

### åœæ­¢å®éªŒ
```bash
# åœæ­¢å•ä¸ªå®éªŒ
kill <PID>

# åœæ­¢æ‰€æœ‰vit_smallå®éªŒ
ps aux | grep "vit_small.*main_imp_fillback" | grep -v grep | awk '{print $2}' | xargs kill
```

---

## ğŸ“ˆ WandBç›‘æ§

**é¡¹ç›®åœ°å€**: https://wandb.ai/ycx/RSST

**å®éªŒåç§°**:
- vit_small_cifar10_refill_head_mlp_0114_2219
- vit_small_cifar10_rsst_head_mlp_0114_2219
- vit_small_cifar100_refill_head_mlp_0114_2219
- vit_small_cifar100_rsst_head_mlp_0114_2219

---

## ğŸ“ åˆå§‹è®­ç»ƒè¿›åº¦

### CIFAR-10 + Refill (Iteration 0, Epoch 0)
```
Loss: 2.3854 â†’ 2.1427 (é™ä½ä¸­)
Train Accuracy: 19.3%
Valid Accuracy: 24.8%
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### é¢„è®­ç»ƒæƒé‡
- âŒ **timmåº“æœªå®‰è£…**
- âœ… è‡ªåŠ¨é™çº§ä¸ºéšæœºåˆå§‹åŒ–
- â„¹ï¸ ä¸å½±å“å®éªŒè¿›è¡Œï¼Œåªæ˜¯è®­ç»ƒæ—¶é—´å¯èƒ½æ›´é•¿

### åˆå§‹åŒ–æ–‡ä»¶
- âœ… å·²ä¸ºæ¯ä¸ªæ•°æ®é›†ç”Ÿæˆç‹¬ç«‹çš„åˆå§‹åŒ–æ–‡ä»¶
- âœ… é¿å…äº†vit_tinyå’Œvit_smallç»“æ„ä¸åŒ¹é…çš„é—®é¢˜

### ç£ç›˜ç©ºé—´
- æ¯ä¸ªå®éªŒä¼šä¿å­˜20ä¸ªcheckpoints
- é¢„è®¡æ¯ä¸ªå®éªŒå ç”¨ ~10GB
- 4ä¸ªå®éªŒæ€»è®¡ ~40GB

---

## ğŸ¯ é¢„æœŸç»“æœ

### å‹ç¼©æ•ˆæœ
- **Attentionç¨€ç–åº¦**: ~33% (head-level)
- **MLPç¨€ç–åº¦**: ~30% (neuron-level)
- **æ€»ä½“å‹ç¼©ç‡**: ~1.5x

### æ€§èƒ½é¢„æœŸ
- **CIFAR-10**: ç¨€ç–æ¨¡å‹å¯èƒ½è¾¾åˆ°å¯†é›†æ¨¡å‹çš„90-95%
- **CIFAR-100**: ç¨€ç–æ¨¡å‹å¯èƒ½è¾¾åˆ°å¯†é›†æ¨¡å‹çš„85-92%

---

## ğŸ” å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æŸ¥çœ‹å½“å‰è¿›åº¦ï¼Ÿ
A: ä½¿ç”¨ `./check_vit_small_status.sh` æˆ–æŸ¥çœ‹WandB

### Q: å¦‚ä½•çŸ¥é“å®éªŒå®Œæˆäº†ï¼Ÿ
A: 
1. è¿›ç¨‹åˆ—è¡¨ä¸­æ²¡æœ‰å¯¹åº”PID
2. æ—¥å¿—æ–‡ä»¶åœæ­¢å¢é•¿
3. WandBæ˜¾ç¤ºå®ŒæˆçŠ¶æ€

### Q: å®éªŒå¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ
A: 
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æœ«å°¾çš„é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥ç£ç›˜ç©ºé—´æ˜¯å¦è¶³å¤Ÿ
3. æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¢«OOMæ€æ‰

### Q: å¯ä»¥ä¸­é€”åœæ­¢ç„¶åç»§ç»­å—ï¼Ÿ
A: 
- ç›®å‰ä¸æ”¯æŒresumeåŠŸèƒ½ï¼ˆ`--resume`å‚æ•°ï¼‰
- åœæ­¢åéœ€è¦é‡æ–°å¼€å§‹

---

## ğŸ“ è”ç³»ä¿¡æ¯

**WandBé¡¹ç›®**: https://wandb.ai/ycx/RSST  
**å®éªŒæ—¶é—´**: 2026-01-14 22:19  
**é¢„è®¡å®Œæˆ**: 2026-01-21 ~ 2026-01-24

---

**ç”Ÿæˆæ—¶é—´**: 2026-01-14 22:30  
**çŠ¶æ€**: âœ… æ‰€æœ‰å®éªŒæ­£å¸¸è¿è¡Œ
