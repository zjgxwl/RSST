# RSST å®éªŒå¯åŠ¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ç”¨æ³•ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰
```bash
./run_experiment.sh
```
**é»˜è®¤é…ç½®**: CIFAR-10, ViT-Tiny, é¢„è®­ç»ƒ, 80 epochs, æ­£åˆ™åŒ–1.0, æŒ‡æ•°4

---

### è‡ªå®šä¹‰å‚æ•°
```bash
./run_experiment.sh <æ•°æ®é›†> <æ¨¡å‹> <epochs> <æ­£åˆ™åŒ–ç²’åº¦> <æŒ‡æ•°æ›²ç‡> <æ˜¯å¦é¢„è®­ç»ƒ> <å‰ªæç‡>
```

**å‚æ•°è¯´æ˜**:
1. `æ•°æ®é›†`: cifar10 / cifar100 / imagenet
2. `æ¨¡å‹`: vit_tiny / vit_small / vit_base / res20s
3. `epochs`: è®­ç»ƒè½®æ•° (æ¨è: 60-100)
4. `æ­£åˆ™åŒ–ç²’åº¦`: RSSTçš„Î»å¢é•¿é€Ÿåº¦ (æ¨è: 0.5-2.0)
5. `æŒ‡æ•°æ›²ç‡`: æ­£åˆ™åŒ–å¢é•¿æ›²çº¿ (æ¨è: 2-6)
6. `æ˜¯å¦é¢„è®­ç»ƒ`: true / false
7. `å‰ªæç‡`: æ¯æ¬¡å‰ªææ¯”ä¾‹ (æ¨è: 0.2)

---

## ğŸ“‹ å¸¸ç”¨åœºæ™¯

### åœºæ™¯1: æ ‡å‡†å®éªŒï¼ˆæ¨èï¼‰
```bash
./run_experiment.sh cifar10 vit_tiny 80 1.0 4 true 0.2
```
- **ç”¨é€”**: æ ‡å‡†RSSTå‰ªæå®éªŒ
- **é¢„è®¡æ—¶é—´**: ~10å°æ—¶

### åœºæ™¯2: å¿«é€Ÿæµ‹è¯•
```bash
./run_experiment.sh cifar10 vit_tiny 60 1.0 4 true 0.2
```
- **ç”¨é€”**: å¿«é€ŸéªŒè¯ä»£ç æµç¨‹
- **é¢„è®¡æ—¶é—´**: ~7å°æ—¶

### åœºæ™¯3: æ¿€è¿›å‰ªæ
```bash
./run_experiment.sh cifar10 vit_tiny 80 1.5 6 true 0.2
```
- **ç”¨é€”**: è¿½æ±‚æ›´é«˜ç¨€ç–åº¦
- **é¢„è®¡æ—¶é—´**: ~10å°æ—¶

### åœºæ™¯4: ä»å¤´è®­ç»ƒ
```bash
./run_experiment.sh cifar10 vit_tiny 100 1.0 4 false 0.2
```
- **ç”¨é€”**: ä¸ä½¿ç”¨é¢„è®­ç»ƒæƒé‡
- **é¢„è®¡æ—¶é—´**: ~12å°æ—¶

---

## ğŸ“ å®éªŒè¾“å‡ºç»“æ„

æ¯æ¬¡è¿è¡Œä¼šè‡ªåŠ¨åˆ›å»ºå¦‚ä¸‹ç»“æ„ï¼š

```
experiments/
â””â”€â”€ 20260109_143052_rsst_vit_tiny_cifar10_pretrained_80ep/
    â”œâ”€â”€ logs/
    â”‚   â”œâ”€â”€ stdout.log              â­ ä¸»è¦è®­ç»ƒæ—¥å¿—ï¼ˆæŸ¥çœ‹è¿™ä¸ªï¼‰
    â”‚   â”œâ”€â”€ stderr.log              âš ï¸  é”™è¯¯æ—¥å¿—
    â”‚   â””â”€â”€ training.pid            ğŸ”¢ è¿›ç¨‹ID
    â”‚
    â”œâ”€â”€ checkpoints/
    â”‚   â”œâ”€â”€ 0model_SA_best.pth.tar  ğŸ’¾ ç¬¬0è½®æœ€ä½³æ¨¡å‹
    â”‚   â”œâ”€â”€ 0checkpoint.pth.tar     ğŸ’¾ ç¬¬0è½®æ£€æŸ¥ç‚¹
    â”‚   â”œâ”€â”€ 0net_train.png          ğŸ“ˆ ç¬¬0è½®è®­ç»ƒæ›²çº¿
    â”‚   â”œâ”€â”€ 1model_SA_best.pth.tar  ğŸ’¾ ç¬¬1è½®æœ€ä½³æ¨¡å‹
    â”‚   â””â”€â”€ ...                     (å…±16è½®)
    â”‚
    â”œâ”€â”€ configs/
    â”‚   â”œâ”€â”€ experiment_config.txt   ğŸ“‹ å®éªŒé…ç½®ï¼ˆäººç±»å¯è¯»ï¼‰
    â”‚   â”œâ”€â”€ args.json               ğŸ“‹ å‚æ•°é…ç½®ï¼ˆJSONæ ¼å¼ï¼‰
    â”‚   â”œâ”€â”€ environment.txt         ğŸ–¥ï¸  è¿è¡Œç¯å¢ƒä¿¡æ¯
    â”‚   â””â”€â”€ command.sh              ğŸ”§ å®Œæ•´è¿è¡Œå‘½ä»¤
    â”‚
    â””â”€â”€ results/
        â””â”€â”€ (è®­ç»ƒç»“æŸåçš„åˆ†æç»“æœ)
```

---

## ğŸ” å®éªŒç›‘æ§

### æŸ¥çœ‹å®æ—¶è®­ç»ƒæ—¥å¿—
```bash
tail -f experiments/latest/logs/stdout.log
```

### æŸ¥çœ‹æœ€è¿‘100è¡Œ
```bash
tail -100 experiments/latest/logs/stdout.log
```

### æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
```bash
tail -f experiments/latest/logs/stderr.log
```

### æ£€æŸ¥å®éªŒé…ç½®
```bash
cat experiments/latest/configs/experiment_config.txt
```

### æ£€æŸ¥è¿›ç¨‹çŠ¶æ€
```bash
PID=$(cat experiments/latest/logs/training.pid)
ps -p $PID
```

---

## ğŸ›‘ åœæ­¢å®éªŒ

### åœæ­¢æœ€æ–°å®éªŒ
```bash
PID=$(cat experiments/latest/logs/training.pid)
kill $PID
```

### åœæ­¢æ‰€æœ‰è®­ç»ƒ
```bash
pkill -f "main_imp_fillback.py"
```

---

## ğŸ“Š å®éªŒç®¡ç†

### åˆ—å‡ºæ‰€æœ‰å®éªŒ
```bash
ls -lht experiments/
```

### æŸ¥æ‰¾ç‰¹å®šå®éªŒ
```bash
# æŸ¥æ‰¾é¢„è®­ç»ƒå®éªŒ
ls experiments/ | grep pretrained

# æŸ¥æ‰¾80 epochså®éªŒ
ls experiments/ | grep 80ep

# æŸ¥æ‰¾CIFAR-10å®éªŒ
ls experiments/ | grep cifar10
```

### æ¯”è¾ƒå®éªŒç»“æœ
```bash
# æŸ¥çœ‹å¤šä¸ªå®éªŒçš„æœ€ä½³å‡†ç¡®ç‡
grep "best SA" experiments/*/logs/stdout.log
```

### æ¸…ç†å¤±è´¥çš„å®éªŒ
```bash
# åˆ é™¤æ²¡æœ‰æ£€æŸ¥ç‚¹çš„å®éªŒï¼ˆå¯èƒ½å¤±è´¥äº†ï¼‰
for dir in experiments/*/; do
    if [ ! -f "${dir}/checkpoints/0model_SA_best.pth.tar" ]; then
        echo "å¯èƒ½å¤±è´¥: $dir"
        # rm -rf "$dir"  # å–æ¶ˆæ³¨é‡Šä»¥åˆ é™¤
    fi
done
```

---

## ğŸ’¡ é‡è¦æç¤º

### âœ… æ¨èåšæ³•
1. **æ¯æ¬¡å®éªŒå‰æ£€æŸ¥**ä¸Šä¸€æ¬¡æ˜¯å¦å®Œæˆ
2. **å®šæœŸæŸ¥çœ‹æ—¥å¿—**ç¡®è®¤è®­ç»ƒæ­£å¸¸
3. **ä¿ç•™é…ç½®æ–‡ä»¶**ä¾¿äºå¤ç°å®éªŒ
4. **ä½¿ç”¨WandB**æŸ¥çœ‹å¯è§†åŒ–æ›²çº¿

### âš ï¸ æ³¨æ„äº‹é¡¹
1. **ä¸è¦ä¿®æ”¹**`experiments/`ä¸‹çš„æ–‡ä»¶
2. **å®šæœŸå¤‡ä»½**é‡è¦çš„æ¨¡å‹æ£€æŸ¥ç‚¹
3. **ç£ç›˜ç©ºé—´**ï¼šæ¯ä¸ªå®éªŒçº¦éœ€5-10GB
4. **GPUå ç”¨**ï¼šç¡®ä¿æ²¡æœ‰å…¶ä»–è®­ç»ƒåœ¨è¿è¡Œ

---

## ğŸ”¥ å®ç”¨æŠ€å·§

### 1. åå°è¿è¡Œåå…³é—­ç»ˆç«¯
```bash
# å¯åŠ¨å®éªŒåï¼Œå¯ä»¥å®‰å…¨å…³é—­Cursor
./run_experiment.sh cifar10 vit_tiny 80 1.0 4 true 0.2
# è®­ç»ƒä¼šåœ¨åå°ç»§ç»­è¿è¡Œ
```

### 2. è¿œç¨‹ç›‘æ§
```bash
# SSHåˆ°æœåŠ¡å™¨åï¼Œå¿«é€ŸæŸ¥çœ‹æœ€æ–°å®éªŒ
tail -f experiments/latest/logs/stdout.log
```

### 3. æ‰¹é‡å®éªŒ
```bash
# ä¾æ¬¡è¿è¡Œå¤šä¸ªå®éªŒï¼ˆæ¯ä¸ªå®Œæˆåè‡ªåŠ¨å¼€å§‹ä¸‹ä¸€ä¸ªï¼‰
./run_experiment.sh cifar10 vit_tiny 80 1.0 4 true 0.2 && \
./run_experiment.sh cifar10 vit_tiny 80 1.5 4 true 0.2 && \
./run_experiment.sh cifar10 vit_tiny 80 2.0 4 true 0.2
```

### 4. å®éªŒå¯¹æ¯”
```bash
# åˆ›å»ºå¯¹æ¯”è„šæœ¬
cat > compare_experiments.sh << 'EOF'
#!/bin/bash
echo "å®éªŒå¯¹æ¯”æŠ¥å‘Š"
echo "=============================================="
for exp in experiments/20260109_*/; do
    echo "å®éªŒ: $(basename $exp)"
    grep "best SA" $exp/logs/stdout.log 2>/dev/null | tail -1
    echo "---"
done
EOF
chmod +x compare_experiments.sh
./compare_experiments.sh
```

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q1: å®éªŒç›®å½•åå¤ªé•¿æ€ä¹ˆåŠï¼Ÿ
**A**: ç›®å½•ååŒ…å«æ—¶é—´æˆ³å’Œå…³é”®ä¿¡æ¯ï¼Œä¾¿äºè¿½æº¯ã€‚ä½¿ç”¨ `experiments/latest` å¿«æ·æ–¹å¼è®¿é—®æœ€æ–°å®éªŒã€‚

### Q2: å¦‚ä½•æ¢å¤ä¸­æ–­çš„å®éªŒï¼Ÿ
**A**: ä½¿ç”¨ `--resume` å’Œ `--checkpoint` å‚æ•°æ‰‹åŠ¨æ¢å¤ï¼ˆéœ€ä¿®æ”¹main_imp_fillback.pyè°ƒç”¨ï¼‰

### Q3: å¦‚ä½•ä¿®æ”¹WandBé¡¹ç›®åï¼Ÿ
**A**: ä¿®æ”¹ `main_imp_fillback.py` ç¬¬130è¡Œçš„ `project='RSST'`

### Q4: è®­ç»ƒæ—¥å¿—åœ¨å“ªé‡Œï¼Ÿ
**A**: `experiments/latest/logs/stdout.log` æˆ–æŸ¥çœ‹å®éªŒç›®å½•ä¸‹çš„ `logs/stdout.log`

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **ViTæ¨¡å‹ä½¿ç”¨**: `ViT_RSSTä½¿ç”¨æŒ‡å—.md`
- **é¢„è®­ç»ƒæ¨¡å‹**: `ViTé¢„è®­ç»ƒæ¨¡å‹ä½¿ç”¨è¯´æ˜.md`
- **é¡¹ç›®è¯¦ç»†åˆ†æ**: `é¡¹ç›®åˆ†ææŠ¥å‘Š.md`
- **WandBé…ç½®**: `WandBå®éªŒåç§°è¯´æ˜.md`

---

**æœ€åæ›´æ–°**: 2026-01-09
**è„šæœ¬ç‰ˆæœ¬**: v1.0
